{% extends 'bootstrap/base.html' %}

{% block styles %}
{{super()}}
<link rel="stylesheet"
      href="{{url_for('.static', filename='css/styles.css')}}">
<link rel="shortcut icon"
      href="{{url_for('.static', filename='favicon.ico')}}">

<!-- Font Awesome -->
  <script src="https://kit.fontawesome.com/679f7d93aa.js" crossorigin="anonymous"></script>
{% endblock %}

{% block title %}Digital NMR{% endblock %}

{% block content %}

{% include "header.html" %}

<!-- Title -->
<section class="title">
    <div class="text-center">
        <div class="container">
            <h1 class="display-4">Digital NMR</h1>
            <p class="lead">Internship project aimed at digitalizing a CW-NMR Machine</p>
        </div>
    </div>
</section>

<!-- Content -->
<section id="content">
    <!-- Image 1 -->
    <div class="container-item">
        <div class="row">
            <div class="col-lg-6 text-center">
                <img class="img_proj img-responsive" src="{{url_for('static', filename='images/digital_nmr_1.png')}}" alt="TBA">
            </div>
            <div class="col-lg-6 text-center content-text-div">
                <h3 class="project-title">Problem Statement</h3>
                <p class="project-description">
                    Nuclear Magnetic Resonance (NMR) is a method of material analysis that is currently costly and
                    inaccurate. Mass Spectrometry is far preferred for its ability to analyze a material. However, Mass
                    Spectrometry is time intensive and destructive to the material being sampled. Covid-19 showcased a
                    use case for a faster method of material analysis. This project aimed to create fully designed
                    architecture of a full, portable, low-cost NMR system based on the digitization on an existing
                    analog NMR device.
                </p>
            </div>
        </div>
    </div>
    <!-- Image 2 -->
    <div class="container-item">
        <div class="row">
            <div class="col-lg-6 text-center content-text-div">
                <img class="img_proj img-responsive" src="{{url_for('static', filename='images/digital_nmr_2.png')}}" alt="TBA">
            </div>
            <div class="col-lg-6 text-center">
                <h3 class="project-title">Starting Point</h3>
                <p class="project-description">
                    This project started with the setup out lined here. The device used was a
                    <a href="https://www.leybold-shop.com/vc3-4-3-1.html">Leybold-Didactic NMR device</a>
                    . The device is powered by a lab-standard programmable power supply. The device has two components,
                    one Electronic and one Mechanical. The user sets the settings and operates the device with the
                    electronic component. The mechanical system handles the magnetic signals and the material being
                    tested. Overall, this device operates as a Continuous-Wave NMR or CW-NMR device.
                </p>
            </div>
        </div>
    </div>
    <!-- Image 3 -->
    <div class="container-item">
        <div class="row">
            <div class="col-lg-6 text-center">
                <img class="img_proj img-responsive" src="{{url_for('static', filename='images/digital_nmr_3.png')}}" alt="TBA">
            </div>
            <div class="col-lg-6 text-center">
                <h3 class="project-title">Overview</h3>
                <p class="project-description">
                    This initial device was then analyzed for its top-level components and very basic system identified.
                    From this initial discovery, an initial architecture was described and requirements outlined for
                    development. A key functional part this the microcontroller. This device sets the high frequency
                    signal, sets the low frequency signal, sets the power output, accepts the digital return signal, and
                    sends the digitized data to the land area network (LAN). The high frequency signal is generated by a
                    direct digital synthesizer (DDS) module. The probe generates the analog signal. The
                    analog-to-digital converter (ADC) converts this signal from digital to analog. The LAN handles the
                    data between the hard drive disk (HDD) and the AI performing pattern recognition to identify
                    material.
                </p>
            </div>
        </div>
    </div>
    <!-- Image 4 -->
    <div class="container-item">
        <div class="row">
            <div class="col-lg-6 text-center">
                <img class="img_proj img-responsive" src="{{url_for('static', filename='images/digital_nmr_4.png')}}" alt="TBA">
            </div>
            <div class="col-lg-6 text-center">
                <h3 class="project-title">Sub Systems</h3>
                <p class="project-description">
                    While I designed the system architecture and performed many of the tests for parts of the machine,
                    other researchers and teams had responsibilities in other sections of the system. This meant that
                    subsystem identification was important for clear project management between the different groups.
                    Splitting the project along technical requirements yielded 4 subsystems: Data Storage and Pattern
                    Recognition, Microcontroller and Analog-to-Digital Conversion, DDS/Amplification/Attenuation,
                    and NMR Hardware and Power Supply. Each Sub System can be further described.
                </p>
            </div>
        </div>
    </div>
    <!-- Image 5 -->
    <div class="container-item">
        <div class="row">
            <div class="col-lg-6 text-center">
                <img class="img_proj img-responsive" src="{{url_for('static', filename='images/digital_nmr_5.png')}}" alt="TBA">
            </div>
            <div class="col-lg-6 text-center">
                <h3 class="project-title">Microcontroller and Analog-to-Digital Conversion</h3>
                <p class="project-description">
                    Initially, an Arduino DUE wa selected as a Microcontroller for this system. It was quickly
                    discovered that the onboard ADC was much too slow to collect useful data. The change was made to
                    implement an STM32 that uses C to program much faster without unnecessary subroutines present in
                    arduino. The DDS selected for this project (
                    <a href="https://www.analog.com/media/en/technical-documentation/data-sheets/ad9850.pdf">the AD9850</a>
                    ) was only able to create one sinusoidal signal, so a second DDS was added to the system. Further,
                    the pattern recognition and downstream signal analysis need the settings data (high frequency rate,
                    voltage and current from the low frequency circuit). The overall triggers from the user were also
                    passed into the microcontroller.
                </p>
            </div>
        </div>
    </div>
    <!-- Image 6 -->
    <div class="container-item">
        <div class="row">
            <div class="col-lg-6 text-center">
                <img class="img_proj img-responsive" src="{{url_for('static', filename='images/digital_nmr_6.png')}}" alt="TBA">
            </div>
            <div class="col-lg-6 text-center">
                <h3 class="project-title">DDS/Amplification/Attenuation</h3>
                <p class="project-description">
                    This sub system was the most technically complicated, as high frequency electronics are much more
                    difficult to prototype. It was ultimately deemed out of scope for this project to build this
                    circuit, however the circuit itself was identified and the requirement set for later development by
                    a more specialized researcher. The B0 (low frequency signal had to be amplified cleanly using a
                    power amplifier. The high frequency signal coming from the probe needed to be attenuated before
                    going to the ADC. Another complication to this system is the shielding necessary for the high
                    frequency circuit. The circuit operates around 20-30 MHz, which is within the range of ambient radio
                    signals. This is a common issue with many NMR devices and presents a technical challenge to
                    overcome.
                </p>
            </div>
        </div>
    </div>
    <!-- Image 7 -->
    <div class="container-item">
        <div class="row">
            <div class="col-lg-6 text-center">
                <img class="img_proj img-responsive" src="{{url_for('static', filename='images/digital_nmr_7.png')}}" alt="TBA">
            </div>
            <div class="col-lg-6 text-center">
                <h3 class="project-title">NMR Hardware and Power Supply</h3>
                <p class="project-description">
                    The power supply received signal to alter its settings, and powered the B0 circuit. The probe was
                    electrically isolated from the B0 circuit and is only connected to the amplification and attenuation
                    circuit from previous sub system. Finally, the field generated by the B0 coils, was altered by the
                    smaller coils powered by the low frequency signal from the second DDS. This sub system was not
                    altered from the starting point. A group is developing a new boot to propagate the magnetic field
                    induced by the B0 circuit. For the sake of this project, it was sufficient to understand on an
                    electrical basis how this system works and assist that team in their development by providing key
                    requirements.
                </p>
            </div>
        </div>
    </div>
    <!-- Image 8 -->
    <div class="container-item">
        <div class="row">
            <div class="col-lg-6 text-center">
                <img class="img_proj img-responsive" src="{{url_for('static', filename='images/digital_nmr_8.png')}}" alt="TBA">
            </div>
            <div class="col-lg-6 text-center">
                <h3 class="project-title">Data Storage and Pattern Recognition</h3>
                <p class="project-description">
                    Finally a Raspberry Pi was developed with a python kernel. This was done for 3 reasons: creating a
                    user interface is easy in Python, AI frameworks are most commonly found in python, and the
                    Raspberry pi removes cost but provides a fully functional computer. The data size was found to be
                    small enough to fit hundred of samples onto a single SD card.
                </p>
            </div>
        </div>
    </div>
    <!-- Image 9 -->
    <div class="container-item">
        <div class="row">
            <div class="col-lg-6 text-center">
                <img class="img_proj img-responsive" src="{{url_for('static', filename='images/digital_nmr_9.png')}}" alt="TBA">
            </div>
            <div class="col-lg-6 text-center">
                <h3 class="project-title">Next Steps</h3>
                <p class="project-description">
                    With the system architecture complete, future projects could be identified. Further developments
                    were needed. Within the DDS/Amplification/Attenuation subsystem, all the components were prototyped
                    seperately. A full integration of all the electronics is needed. For the Data Storage and Pattern
                    Recognition subsystem, the Pattern Recognition (AI) system had to be developed now that the signal
                    data is better known. Further integrating the communication pipeline between the STM32 and the
                    Raspberry Pi and developing the user interface was another project to be completed.
                </p>
            </div>
        </div>
    </div>
</section>

<!-- Footer Content -->
<section id="base-content">
    <div class="container-fluid text-center">
        <div class="row">
            <h3>Special Thanks:</h3>
            <p>Insert Course Name</p>
            <p>Link to course page</p>

            <p>Return to projects page here:</p>
            <div class="row">
                <a class="btn btn-lg" href="/projects" role="button">Projects</a>
            </div>

            <p>Return to homepage here:</p>
            <div class="row">
                <a class="btn btn-lg" href="/" role="button">Home</a>
            </div>
        </div>
    </div>
</section>

{% include "footer.html" %}

{% endblock %}